phase = 0
while 1 < i && phase == 1:
    if phase == 0:
        n = 1
        phase = 1
    else:
        if 0 < n:
            d = Bernoulli(1/2)
            i = i - d
            n = n - 1
        else:
            phase = 0
        end
    end
end